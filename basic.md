## 前置公式

### 基本公式

| 模式           | 公式          | 额外                       |
|----------------|---------------|----------------------------|
| 最右位 1 -> 0  | x and (x - 1) | 判断一个数字是否是2的N次方 |
| 最右位 0 -> 1  | x or  (x + 1) |                            |
| 尾部所有1 -> 0 | x and (x + 1) |                            |
| 尾部所有0 -> 1 | x or  (x - 1) |                            |

### 寻找公式

| 模式                  | 公式             | 额外                                    |
|-----------------------|------------------|-----------------------------------------|
| 寻找最右位为0的位     | ~x and ( x + 1 ) | 保留方式: 取反                          |
| **寻找最右位为1的位** | ~x or  ( x - 1 ) | **保留方式: 取反**                      |
| 寻找尾部所有的0的位   | ~x and ( x - 1 ) | 寻找方式: 取反 (能发挥处理器的并行能力) |
| 寻找尾部所有的0的位   | ~( x or -x )     | 寻找方式: 取反                          |
| 寻找尾部所有的0的位   | ( x and -x ) - 1 | 寻找方式: 取反                          |
| 寻找尾部所有的1的位   | ~x or (x + 1)    | 寻找方式: 取反                          |
| **寻找最右位为1的位** | x and (-x)       | **寻找方式: 保留**                      |

```
草稿
~x = ~(-(-x)) = (-x - 1) = -(x+1)
-(x+1) and (x-1) == (x and -x) - 1
x = ~(~x) = ~(~(-(-x))) = ~(-x - 1)
y = (-x)
 ~(~(-y))
 ~(~(-y)) = ~(-x - 1)
 ~(-y) = y - 1
~(-x-1) 
```

### 变化为1公式

| 模式                       | 公式                       | 额外                            |
|----------------------------|----------------------------|---------------------------------|
| 寻找到最右为1的位，后置为1 | x xor (x - 1)              |                                 |
| 寻找到最右为0的位，后置为1 | x xor (x + 1)              |                                 |
| 关闭最右连续的1            | ((x or (x-1)) + 1) and x   | 验证2<sup>k</sup>-2<sup>j</sup> |
| 关闭最右连续的1            | ((x and -x) + x) and x     | 验证2<sup>k</sup>-2<sup>j</sup> |

## 基本布尔公式

| 公式                            |
|---------------------------------|
| ~(x and y) = ~x or ~y           |
| ~(x or y) = ~x and ~y           |
| ~(x + 1) = ~x - 1               |
| ~(x - 1) = ~x + 1               |
| ~-x = x - 1                     |
| ~(x xor y) = ~x xor y = x nor y |
| ~(x nor y) = ~x nor y = x xor y |
| ~(x + y) = ~x - y               |
| ~(x - y) = ~x + y               |

